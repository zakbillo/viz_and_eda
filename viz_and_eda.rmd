---
title: "viz_and_eda"
author: "Zakari L. Billo"
date: "2025-09-25"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(ggridges)
library(p8105.datasets)
```

Import the weather dataset

```{r}
data("weather_df")
```

make our first plot

without geom point, the ggplot doesn't know what object types to put on the graph

```{r}
weather_df |> ggplot(aes(x = tmin, y = tmax))
```

```{r}
ggp_weather_scatter <- weather_df |> ggplot(aes(x = tmin, y = tmax)) + geom_point()

ggp_weather_scatter
```

check rows are missing 

```{r}
weather_df |> filter(is.na(tmax))
```

```{r}
ggplot(weather_df, aes(x = tmin, y = tmax, color = name)) + #color can be in the ggplot(aes())
  geom_point(alpha = 0.3) + #alpha = opacity param
  geom_smooth(se = FALSE) #
```

 where you define aesthetics matters
 
```{r}
weather_df |>
ggplot(aes(x = tmin, y = tmax)) +
geom_point(aes(color = name, size = prcp), alpha = 0.3) + 
geom_smooth(se = FALSE) 
```

use faceting rq

```{r}
weather_df |>
ggplot(aes(x = tmin, y = tmax)) +
geom_point(aes(color = name, size = prcp), alpha = 0.8) + 
geom_smooth(se = FALSE) + 
facet_grid(. ~ name)

weather_df |>
ggplot(aes(x = tmin, y = tmax)) +
geom_point(aes(color = name, size = prcp), alpha = 0.8) + 
geom_smooth(se = FALSE) + 
facet_grid(name ~ .)
```

make something more interesting 

```{r}
weather_df |>
ggplot(aes(x = tmin, y = tmax, color = name)) +
geom_point(aes(size = prcp), alpha = 0.3) + 
geom_smooth(se = FALSE) + 
facet_grid(. ~ name)

weather_df |>
ggplot(aes(x = tmin, y = tmax, color = name, shape = name)) +
geom_point(aes(size = prcp), alpha = 0.3) + 
geom_smooth(se = FALSE) + 
facet_grid(. ~ name)
```

learning assessment

```{r}
weather_df |>
  filter(name == "CentralPark_NY") |>
  mutate(
    tmax_fahr = tmax * (9/5) + 32,
    tmin_fahr = tmin * (9/5) + 32
  ) |>
  ggplot(aes(x = tmin_fahr, y = tmax_fahr)) + 
  geom_point() + geom_smooth(se = FALSE, method = "lm")
```

## small things

```{r}
weather_df |>
  ggplot(aes(x = tmin, y = tmax, color = name, shape = name)) +
  #geom_point(alpha = 0.3) + 
  geom_smooth(se = FALSE) 

weather_df |>
  ggplot(aes(x = tmin, y = tmax, color = name, shape = name)) +
  geom_smooth(se = FALSE) +
  geom_point(alpha = 0.3)  
```
 
trying hexbin package as a geom

```{r}
weather_df |>
  ggplot(aes(x = tmin, y = tmax)) +
  geom_hex()
```

```{r}
weather_df |>
  ggplot(aes(x = tmin, y = tmax)) +
  geom_point(color = "violet")
```

## univariate plots

```{r}
weather_df |> 
  ggplot(aes(x = tmin)) + 
  geom_histogram(color = "black", fill = "blue")
```

```{r}
weather_df |> 
  ggplot(aes(x = tmin, color = name)) + 
  geom_histogram()
```

```{r}
weather_df |> 
  ggplot(aes(x = tmin, fill = name)) + 
  geom_histogram()
```

how do i fix this overlaying? facet

```{r}
weather_df |> 
  ggplot(aes(x = tmin, fill = name)) + 
  geom_histogram() + 
  facet_grid(name ~ .)
```

maybe density plot?

```{r}
weather_df |> 
  ggplot(aes(x = tmin, fill = name)) + 
  geom_density(alphs = 0.2)
```

```{r}
weather_df |> 
  ggplot(aes(x = name, y = tmin)) + 
  geom_boxplot(aes(fill = name))
```

mapping an aesthetic type in aes() (like color, alpha) you are aestheticing by a value, but when you map it outside of an aes() statement, it is a global param

violin plots?

```{r}
weather_df |> 
  ggplot(aes(x = name, y = tmin, fill = name)) + 
  geom_violin()
```

what abt a ridge plot

```{r}
weather_df |>
  ggplot(aes(x = tmin, y = name)) +
  geom_density_ridges()
```

learning assessment 

```{r}
weather_df |> 
  filter(prcp < 500) |>
  ggplot(aes(x = prcp, fill = name)) + 
  geom_density(alpha = 0.4) 

#or

weather_df |> 
  filter(prcp > 5, prcp < 500) |>
  ggplot(aes(x = prcp, fill = name)) + 
  geom_density(alpha = 0.4) 
```
## saving and embedding plots

saving plots

```{r}
ggp_weather_violin = 
  weather_df |>
  ggplot(aes(x = name, y = tmin, fill = name)) +
  geom_violin()

ggp_weather_violin

ggsave("plots/violin_plot.pdf", ggp_weather_violin, 
       width = 8, height = 6)
```

embedding plots

```{r, fig.width = 6, fig.heigt}
ggp_weather_violin
```

